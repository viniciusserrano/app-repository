global:
  scrape_interval:     15s       # intervalos de coleta
  evaluation_interval: 15s       # intervalos de avaliação de regras

scrape_configs:
  - job_name: 'api-imobiliaria'
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['api-imobiliaria:8080']

  - job_name: 'api-imobiliaria-endereco'
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['api-imobiliaria-endereco:8088']

  - job_name: 'api-imobiliaria-remoto'
    scheme: https
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['app-imobiliaria.onrender.com']

  - job_name: 'api-imobiliaria-endereco-remoto'
    scheme: https
    metrics_path: /actuator/prometheus
    static_configs:
      - targets: ['api-imobiliaria-endereco.onrender.com']

  - job_name: 'prometheus'            # opcional: monitora o próprio Prometheus
    static_configs:
      - targets: ['localhost:9090']

remote_write:
  - url: "${GRAFANA_CLOUD_URL}"
    basic_auth:
      username: "${GRAFANA_CLOUD_USERNAME}"
      password: "${GRAFANA_CLOUD_API_KEY}"